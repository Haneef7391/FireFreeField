<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Green Energy - Submit Crop Waste</title>
  <link rel="stylesheet" href="green-energy.css">
</head>

<body class="page-green">

  <header>
    <h1>Green Energy</h1>
    <p class="subtitle">How to use/buy crop waste</p>
    <p class="subtitle-2">Don't burn crop - Save environment</p>
  </header>

  <main>

    <div class="image-section">
      <div class="image-box"> <img src="money-t-1.jpeg"></div>
      <div class="image-box"> <img src="money-t-2.jpeg"></div>
    </div>

    <section class="form-section">
      <h2 id="form-header">Submit Crop Waste Details</h2>

      <form id="greenForm" novalidate>
        <div>
          <label>Your Image (Upload at least ONE):</label>
          <input type="file" id="userImage" accept="image/*">
        </div>
        
        <label>Password</label>
        <input id="password" name="password" type="password" required>
        
        <label>Company</label>
        <select id="company" name="company" required>
          <option value="">Select Company</option>
          <option>Biofuel</option>
          <option>Bioelectricity</option>
          <option>Biofertilization</option>
          <option>Paper Industry</option>
        </select>
        <div class="mobile-select custom-select">
          <div class="custom-select-display">Select Company</div>
          <div class="custom-select-options">
            <div>Biofuel</div>
            <div>Bioelectricity</div>
            <div>Biofertilization</div>
            <div>Paper Industry</div>
          </div>
        </div>
        
        <label>Type of crop waste</label>
        <select id="wasteType" name="wasteType" required>
          <option value="">Select Crop Waste</option>
          <option>Wheat</option>
          <option>Jowar</option>
          <option>Ragi</option>
          <option>Paddy</option>
          <option>Other</option>
        </select>
        <div class="mobile-select custom-select">
          <div class="custom-select-display">Select Crop Waste</div>
          <div class="custom-select-options">
            <div>Wheat</div>
            <div>Jowar</div>
            <div>Ragi</div>
            <div>Paddy</div>
            <div>Other</div>
          </div>
        </div>
        
        <label>Quantity</label>
        <select id="quantity" name="quantity" required>
          <option value="">Select Quantity</option>
          <option>1-5 Ton</option>
          <option>6-10 Ton</option>
          <option>11-15 Ton</option>
          <option>16-20 Ton</option>
        </select>
        <div class="mobile-select custom-select">
          <div class="custom-select-display">Select Quantity</div>
          <div class="custom-select-options">
            <div>1-5 Ton</div>
            <div>6-10 Ton</div>
            <div>11-15 Ton</div>
            <div>16-20 Ton</div>
          </div>
        </div>
        
        <label>Payment Mode</label>
        <select id="paymentMode" name="paymentMode" required>
          <option value="">Select Payment Mode</option>
          <option>Phone Pay</option>
          <option>Google Pay</option>
        </select>
        <div class="mobile-select custom-select">
          <div class="custom-select-display">Select Payment Mode</div>
          <div class="custom-select-options">
            <div>Phone Pay</div>
            <div>Google Pay</div>
          </div>
        </div>
        
        <label>Mode of receiving money</label>
        <select id="benefitMode" name="benefitMode" required>
          <option value="">Select Receiving Mode</option>
          <option>Bank Account</option>
          <option>Cash on Delivery</option>
        </select>
        <div class="mobile-select custom-select">
          <div class="custom-select-display">Select Receiving Mode</div>
          <div class="custom-select-options">
            <div>Bank Account</div>
            <div>Cash on Delivery</div>
          </div>
        </div>
        
        <label>Govt Carbon Trade</label>
        <select id="govtTrading" name="govtTrading" required>
          <option value="">Select Range</option>
          <option>1 to 10 Tonnes coal</option>
          <option>11 to 20 Tonnes coal</option>
          <option>20 to 30 Tonnes coal</option>
          <option>30 to 40 Tonnes coal</option>
        </select>
        <div class="mobile-select custom-select">
          <div class="custom-select-display">Select Range</div>
          <div class="custom-select-options">
            <div>1 to 10 Tonnes coal</div>
            <div>11 to 20 Tonnes coal</div>
            <div>20 to 30 Tonnes coal</div>
            <div>30 to 40 Tonnes coal</div>
          </div>
        </div>
        
        <button type="submit">Submit</button>
        
      </form>
    </section>
  </main>

  <footer>
    <p><a href="index.html">Back to main</a></p>
  </footer>

  <script>
    const form = document.getElementById("greenForm");
    const userImage = document.getElementById("userImage");

    form.addEventListener("submit", e => {
      e.preventDefault();

      let isValid = true;

      document.querySelectorAll(".error-msg").forEach(el => el.remove());
      document.querySelectorAll(".error-field").forEach(el => el.classList.remove("error-field"));

      form.querySelectorAll("input[required], select[required]").forEach(field => {
        if (!field.value.trim()) {
          isValid = false;
          field.classList.add("error-field");
          const err = document.createElement("div");
          err.className = "error-msg";
          err.textContent = "This field is required.";
          field.parentNode.appendChild(err);
        }
      });

      if (!userImage.files.length) {
        isValid = false;
        userImage.classList.add("error-field");
        const err = document.createElement("div");
        err.className = "error-msg";
        err.textContent = "Please upload at least one image.";
        userImage.parentNode.appendChild(err);
      }

      if (!isValid) return;

      // MULTIPLE green submissions
      const formData = {};
      [...new FormData(form).entries()].forEach(([k,v]) => formData[k]=v);

      if (userImage.files.length) {
        formData.uploadedImage = userImage.files[0].name;
      }

      formData.id = Date.now();
      formData.createdAt = new Date().toISOString();

      const existing = JSON.parse(localStorage.getItem("greenSubmissions") || "[]");
      existing.push(formData);

      localStorage.setItem("greenSubmissions", JSON.stringify(existing));

      window.location.href = "green-success.html";
    });
    // Mobile dropdown logic for Green Energy form
document.querySelectorAll(".mobile-select").forEach(select => {
  const display = select.querySelector(".custom-select-display");
  const options = select.querySelectorAll(".custom-select-options div");
  const realSelect = select.previousElementSibling;

  display.addEventListener("click", () => {
    select.classList.toggle("open");
  });

  options.forEach(opt => {
    opt.addEventListener("click", () => {
      display.textContent = opt.innerText;
      realSelect.value = opt.innerText;
      select.classList.remove("open");
    });
  });
});

document.addEventListener("click", e => {
  document.querySelectorAll(".mobile-select.open").forEach(select => {
    if (!select.contains(e.target)) select.classList.remove("open");
  });
});

  </script>

</body>
</html>
